// Ensure the DOM is ready before executing the following jQuery code
(function($) {
    // Remove the "no-js" class from the <html> element to indicate JavaScript is enabled
    $("html").removeClass("no-js");

    // Smooth scroll for anchor links in the header
    $("header a").click(function(e) {
        // Check if the link does not have a "no-scroll" class
        if (!$(this).hasClass("no-scroll")) {
            e.preventDefault();
            // Get the target element's ID from the link's href attribute
            var target = $(this).attr("href");
            // Calculate the target element's offset from the top of the page
            var targetOffset = $(target).offset().top;

            // Animate the scroll to the target element
            $("html, body").animate({
                scrollTop: targetOffset + "px"
            }, Math.abs(window.pageYOffset - targetOffset));

            // If the header has an "active" class, remove it
            if ($("header").hasClass("active")) {
                $("header, body").removeClass("active");
            }
        }
    });

    // Scroll to the top when the "to-top" element is clicked
    $("#to-top").click(function() {
        $("html, body").animate({
            scrollTop: 0
        }, 500);
    });

    // Scroll to the next section when the "lead-down" element is clicked
    $("#lead-down span").click(function() {
        var targetOffset = $("#lead").next().offset().top;

        $("html, body").animate({
            scrollTop: targetOffset + "px"
        }, 500);
    });

    // Transform the experience timeline structure
    $("#experience-timeline").each(function() {
        var $this = $(this);
        var $userContent = $this.children("div");

        $userContent.each(function() {
            // Wrap each content block in a timeline point and block
            $(this).addClass("vtimeline-content").wrap('<div class="vtimeline-point"><div class="vtimeline-block"></div></div>');
        });

        // Add timeline icon to each timeline point
        $this.find(".vtimeline-point").each(function() {
            $(this).prepend('<div class="vtimeline-icon"><i class="fa fa-map-marker"></i></div>');
        });

        // Add date information to each timeline content block
        $this.find(".vtimeline-content").each(function() {
            var date = $(this).data("date");
            if (date) {
                $(this).parent().prepend('<span class="vtimeline-date">' + date + "</span>");
            }
        });
    });

    // Open mobile menu
    $("#mobile-menu-open").click(function() {
        $("header, body").addClass("active");
    });

    // Close mobile menu
    $("#mobile-menu-close").click(function() {
        $("header, body").removeClass("active");
    });

    // Show more projects when "view-more-projects" is clicked
    $("#view-more-projects").click(function(e) {
        e.preventDefault();
        $(this).fadeOut(300, function() {
            $("#more-projects").fadeIn(300);
        });
    });
})(jQuery);
